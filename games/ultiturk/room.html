<!doctype html>
<title>Waiting Room</title>

<!-- Loading  nodeGame libraries and CSS -->
<script src="/socket.io/socket.io.js"></script> 
<script src="/javascripts/nodegame-full.js" charset="utf-8"></script>
<link rel='stylesheet' href='/stylesheets/player.css'></link>

<style>
noscript {
  font-size: 20px;
  padding: 5px;
  margin: 5px;
}

div#errorNodeGame {
  font-size: 20px;
  padding: 5px;
  margin: 5px;
}

iframe#mainframe {
  height: 800px;
}


</style>
<!-- end -->


<!-- JQUERY UI STARTS -->
<link type="text/css" href="./lib/jqueryui/css/ui-lightness/jquery-ui-1.8.20.custom.css" rel="Stylesheet" />
<script src="./lib/jqueryui/js/jquery-1.7.2.min.js" charset="utf-8"></script>
<script src="./lib/jqueryui/js/jquery-ui-1.8.20.custom.min.js" charset="utf-8"></script>
<!-- JQUERY UI ENDS -->

<!-- no Escape -->
<!-- <script src="/javascripts/noescape.js" charset="utf-8"></script> -->
<!-- no Escape ends -->


<!-- Loading the Ultimatum game -->
<!-- <script src="./Chat.js" charset="utf-8"></script>  -->
<script src="./js/Ultimatum_wait.js" charset="utf-8"></script>


<!-- end -->

<body>
<div id="root">
  <h2 id="h2title">Welcome to this game</h2>
  <div id="errorNodeGame" style="display: none;">An error has occurred. Your browser is not supported. Please report the following error:<br></div>
<noscript>Your browser does not support JavaScript. You cannot take this HIT, if you don't have JavaScript enabled in your browser.</noscript>
</div>
<iframe name="mainframe" id="mainframe">Connecting to the server...</iframe>
<script>
<!--
  window.onload = function () {

	
		// Player ID from Mturk
	   var mtid = JSUS.getQueryString('id');
	  
		// Create the Client
			
		 var conf = {
			url: "/ultimatum/wait",
			verbosity: 100,
      io: {        
           reconnect: false
      },
      window: {
    	  promptOnleave: false
      },
      player: {
          mtid: mtid,
          navigator: navigator.appVersion
      },
      events: {
    	  dumpEvents: false,
    	  history: false
      }
		};

		try {
			 node.play(conf, new Ultimatum_wait());	
			  
		   W.noEscape(window);
	 	}
    catch(e) {
    	var errorDiv = document.getElementById('errorNodeGame');
    	errorDiv.appendChild(document.createTextNode(node.game ? node.game.state : 'no-state'));
    	errorDiv.appendChild(document.createTextNode(' - '));
    	errorDiv.appendChild(document.createTextNode(navigator.userAgent));
    	errorDiv.style.display = '';
    }

	}
	// -->
</script>
</body>
